// Do not edit this file; automatically generated by gulp.

/* eslint-disable */
;(function(root, factory) {
  if (typeof define === 'function' && define.amd) { // AMD
    define(['./blockly_compressed.js'], factory);
  } else if (typeof exports === 'object') { // Node.js
    module.exports = factory(require('./blockly_compressed.js'));
  } else { // Browser
    root.Blockly.CSharp = factory(root.Blockly);
  }
}(this, function(Blockly) {
  'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};Blockly.CSharp=new Blockly.Generator("CSharp");Blockly.CSharp.addReservedWords("abstract,as,base,bool,break,byte,case,catch,char,checked,class,const,continue,decimal,default,delegate,do,double,else,enum,event,explicit,extern,false,finally,fixed,float,for,foreach,goto,if,implicit,in,int,interface,internal,is,lock,long,namespace,new,null,object,operator,out,override,params,private,protected,public,readonly,ref,return,sbyte,sealed,short,sizeof,stackalloc,static,string,struct,switch,this,throw,true,try,typeof,uint,ulong,unchecked,unsafe,ushort,using,virtual,void,volatile,while");
Blockly.CSharp.ORDER_ATOMIC=0;Blockly.CSharp.ORDER_MEMBER=1;Blockly.CSharp.ORDER_NEW=1;Blockly.CSharp.ORDER_TYPEOF=1;Blockly.CSharp.ORDER_FUNCTION_CALL=1;Blockly.CSharp.ORDER_INCREMENT=1;Blockly.CSharp.ORDER_DECREMENT=1;Blockly.CSharp.ORDER_LOGICAL_NOT=2;Blockly.CSharp.ORDER_BITWISE_NOT=2;Blockly.CSharp.ORDER_UNARY_PLUS=2;Blockly.CSharp.ORDER_UNARY_NEGATION=2;Blockly.CSharp.ORDER_MULTIPLICATION=3;Blockly.CSharp.ORDER_DIVISION=3;Blockly.CSharp.ORDER_MODULUS=3;Blockly.CSharp.ORDER_ADDITION=4;
Blockly.CSharp.ORDER_SUBTRACTION=4;Blockly.CSharp.ORDER_BITWISE_SHIFT=5;Blockly.CSharp.ORDER_RELATIONAL=6;Blockly.CSharp.ORDER_EQUALITY=7;Blockly.CSharp.ORDER_BITWISE_AND=8;Blockly.CSharp.ORDER_BITWISE_XOR=9;Blockly.CSharp.ORDER_BITWISE_OR=10;Blockly.CSharp.ORDER_LOGICAL_AND=11;Blockly.CSharp.ORDER_LOGICAL_OR=12;Blockly.CSharp.ORDER_CONDITIONAL=13;Blockly.CSharp.ORDER_ASSIGNMENT=14;Blockly.CSharp.ORDER_COMMA=15;Blockly.CSharp.ORDER_NONE=99;Blockly.CSharp.INFINITE_LOOP_TRAP=null;
Blockly.CSharp.init=function(a){Blockly.CSharp.definitions_={};if(Blockly.Variables){Blockly.CSharp.variableDB_?Blockly.CSharp.variableDB_.reset():Blockly.CSharp.variableDB_=new Blockly.Names(Blockly.CSharp.RESERVED_WORDS_);var b=[];b=b.concat(Blockly.CSharp.getDefinitions(a));b=b.concat(Blockly.CSharp.getDefinitions(a,"inferbool"));b=b.concat(Blockly.CSharp.getDefinitions(a,"inferdouble"));Blockly.CSharp.definitions_.variables=b.join("\n")}};
Blockly.CSharp.getDefinitions=function(a,b){var c=[];a=Blockly.Variables.allDeveloperVariables(a);for(var d=0;d<a.length;d++){var e=Blockly.CSharp.variableDB_.getName(a[d],Blockly.Variables.NAME_TYPE),g="dynamic ";b&&b.startsWith("infer")&&(g="Variable<"+b.substr(5)+"> ");c[d]=g+e+";"}return c};Blockly.CSharp.build_definitions=function(){var a=[],b;for(b in Blockly.CSharp.definitions_)a.push(Blockly.CSharp.definitions_[b]);return a.join("\n\n")+"\n\n\n"};Blockly.CSharp.finish=function(a){return a};
Blockly.CSharp.scrubNakedValue=function(a){return a+";\n"};Blockly.CSharp.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return'"'+a+'"'};Blockly.CSharp.multiline_quote_=function(a){return a.split(/\n/g).map(this.quote_).join(' + "\\n" +\n')};
Blockly.CSharp.scrub_=function(a,b){if(null===b)return"";var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=this.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=this.allNestedComments(d))&&(c+=this.prefixLines(d,"// "))}a=a.nextConnection&&a.nextConnection.targetBlock();a=this.blockToCode(a);return c+b+a};Blockly.CSharp.colour={};Blockly.CSharp.colour_picker=function(){return['ColorTranslator.FromHtml("'+this.getFieldValue("COLOUR")+'")',Blockly.CSharp.ORDER_ATOMIC]};
Blockly.CSharp.colour_random=function(){if(!Blockly.CSharp.definitions_.colour_random){var a=Blockly.CSharp.variableDB_.getDistinctName("colour_random",Blockly.Generator.NAME_TYPE);Blockly.CSharp.colour_random.functionName=a;var b=[];b.push("var "+a+" = new Func<Color>(() => {");b.push("  var random = new Random();");b.push("  var res = Color.FromArgb(1, random.Next(256), random.Next(256), random.Next(256));");b.push("  return res;");b.push("});");Blockly.CSharp.definitions_.colour_random=b.join("\n")}return[Blockly.CSharp.colour_random.functionName+
"()",Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.colour_rgb=function(){var a=Blockly.CSharp.valueToCode(this,"RED",Blockly.CSharp.ORDER_COMMA)||0,b=Blockly.CSharp.valueToCode(this,"GREEN",Blockly.CSharp.ORDER_COMMA)||0,c=Blockly.CSharp.valueToCode(this,"BLUE",Blockly.CSharp.ORDER_COMMA)||0;if(!Blockly.CSharp.definitions_.colour_rgb){var d=Blockly.CSharp.variableDB_.getDistinctName("colour_rgb",Blockly.Generator.NAME_TYPE);Blockly.CSharp.colour_rgb.functionName=d;var e=[];e.push("var "+d+" = new Func<dynamic, dynamic, dynamic, Color>((r, g, b) => {");e.push("  r = (int)Math.Round(Math.Max(Math.Min((int)r, 100), 0) * 2.55);");
e.push("  g = (int)Math.Round(Math.Max(Math.Min((int)g, 100), 0) * 2.55);");e.push("  b = (int)Math.Round(Math.Max(Math.Min((int)b, 100), 0) * 2.55);");e.push("  var res = Color.FromArgb(1, r, g, b);");e.push("  return res;");e.push("});");Blockly.CSharp.definitions_.colour_rgb=e.join("\n")}return[Blockly.CSharp.colour_rgb.functionName+"("+a+", "+b+", "+c+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.colour_blend=function(){var a=Blockly.CSharp.valueToCode(this,"COLOUR1",Blockly.CSharp.ORDER_COMMA)||"Color.Black",b=Blockly.CSharp.valueToCode(this,"COLOUR2",Blockly.CSharp.ORDER_COMMA)||"Color.Black",c=Blockly.CSharp.valueToCode(this,"RATIO",Blockly.CSharp.ORDER_COMMA)||.5;if(!Blockly.CSharp.definitions_.colour_blend){var d=Blockly.CSharp.variableDB_.getDistinctName("colour_blend",Blockly.Generator.NAME_TYPE);Blockly.CSharp.colour_blend.functionName=d;var e=[];e.push("var "+d+" = new Func<Color, Color, double, Color>((c1, c2, ratio) => {");
e.push("  ratio = Math.Max(Math.Min((double)ratio, 1), 0);");e.push("  var r = (int)Math.Round(c1.R * (1 - ratio) + c2.R * ratio);");e.push("  var g = (int)Math.Round(c1.G * (1 - ratio) + c2.G * ratio);");e.push("  var b = (int)Math.Round(c1.B * (1 - ratio) + c2.B * ratio);");e.push("  var res = Color.FromArgb(1, r, g, b);");e.push("  return res;");e.push("});");Blockly.CSharp.definitions_.colour_blend=e.join("\n")}return[Blockly.CSharp.colour_blend.functionName+"("+a+", "+b+", "+c+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.inferboilerplate={};Blockly.CSharp.algorithmMap={EP:"ExpectationPropagation",VMP:"VariationalMessagePassing",Gibbs:"GibbsSampling"};
Blockly.CSharp.inferboilerplate=function(a){var b="InferenceEngine engine = new InferenceEngine();\nengine.Algorithm = new "+(Blockly.CSharp.algorithmMap[a.getFieldValue("ALGORITHM_DROPDOWN")]+"();\n"),c=Blockly.CSharp.build_definitions();a=Blockly.CSharp.statementToCode(a,"STATEMENTS").trim();a=(b+c+a).split("\n").map(function(d){return"\t\t\t"+d}).join("\n");return"using System;\nusing System.Collections.Generic;\nusing System.Text;\nusing MicrosoftResearch.Infer.Models;\nusing MicrosoftResearch.Infer;\nusing MicrosoftResearch.Infer.Distributions;\nusing MicrosoftResearch.Infer.Maths;\n\nnamespace BlocklyInfer\n{\n\tpublic class BlocklyInfer\n\t{\n\t\tpublic static void Main()\n\t\t{\n"+
a+"\n\t\t}\n\t}\n}"};Blockly.CSharp.inferinfer=function(a){return["engine.Infer("+Blockly.CSharp.valueToCode(a,"DISTR",Blockly.CSharp.ORDER_ATOMIC)+")",Blockly.CSharp.ORDER_NONE]};Blockly.CSharp.inferalgo=function(a){a=a.getFieldValue("ALGORITHM_DROPDOWN");return["engine.Algorithm is "+Blockly.CSharp.algorithmMap[a],Blockly.CSharp.ORDER_NONE]};Blockly.CSharp.inferconstrain_true=function(a){return"Variable.ConstrainTrue("+Blockly.CSharp.valueToCode(a,"DISTR",Blockly.CSharp.ORDER_ATOMIC)+");\n"};Blockly.CSharp.inferbool_variables={};Blockly.CSharp.infer_variables={};Blockly.CSharp.inferbool_variables_get=function(){return[Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.CSharp.ORDER_ATOMIC]};Blockly.CSharp.inferbool_variables_set=function(){var a=Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_ASSIGNMENT)||"null";return Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+a+";\n"};
Blockly.CSharp.inferbool_observed=function(a){var b=Blockly.CSharp.valueToCode(a,"DISTR",Blockly.CSharp.ORDER_ATOMIC);a=Blockly.CSharp.valueToCode(a,"VALUE",Blockly.CSharp.ORDER_ATOMIC);return b+".ObservedValue = "+a+";\n"};Blockly.CSharp.inferdistributions={};Blockly.CSharp.infer_bernoulli=function(a){return["Variable.Bernoulli("+Blockly.CSharp.valueToCode(a,"PROB",Blockly.CSharp.ORDER_ATOMIC)+")",Blockly.CSharp.ORDER_NONE]};Blockly.CSharp.infer_bernoulli_c=function(a){var b=a.getFieldValue("TYPE"),c=Blockly.CSharp.valueToCode(a,"DISTR1",Blockly.CSharp.ORDER_ATOMIC);a=Blockly.CSharp.valueToCode(a,"DISTR2",Blockly.CSharp.ORDER_ATOMIC);return[c+" "+{AND:"&",OR:"|"}[b]+" "+a,Blockly.CSharp.ORDER_NONE]};
Blockly.CSharp.infer_gaussianmeanvar=function(a){var b=Blockly.CSharp.valueToCode(a,"MEAN",Blockly.CSharp.ORDER_ATOMIC);a=Blockly.CSharp.valueToCode(a,"VAR",Blockly.CSharp.ORDER_ATOMIC);return["Variable.GaussianFromMeanAndVariance("+b+", "+a+")",Blockly.CSharp.ORDER_NONE]};
Blockly.CSharp.infer_gaussianmeanprec=function(a){var b=Blockly.CSharp.valueToCode(a,"MEAN",Blockly.CSharp.ORDER_ATOMIC);a=Blockly.CSharp.valueToCode(a,"PREC",Blockly.CSharp.ORDER_ATOMIC);return["Variable.GaussianFromMeanAndPrecision("+b+", "+a+")",Blockly.CSharp.ORDER_NONE]};
Blockly.CSharp.infer_gammashapescale=function(a){var b=Blockly.CSharp.valueToCode(a,"SHAPE",Blockly.CSharp.ORDER_ATOMIC);a=Blockly.CSharp.valueToCode(a,"SCALE",Blockly.CSharp.ORDER_ATOMIC);return["Variable.GammaFromShapeAndScale("+b+", "+a+")",Blockly.CSharp.ORDER_NONE]};Blockly.CSharp.infer_newdouble=function(a){return["Variable.New<double>()",Blockly.CSharp.ORDER_NONE]};Blockly.CSharp.inferdouble_variables={};Blockly.CSharp.infer_variables={};Blockly.CSharp.inferdouble_variables_get=function(){return[Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.CSharp.ORDER_ATOMIC]};Blockly.CSharp.inferdouble_variables_set=function(){var a=Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_ASSIGNMENT)||"null";return Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+a+";\n"};
Blockly.CSharp.inferdouble_observed=function(a){var b=Blockly.CSharp.valueToCode(a,"DISTR",Blockly.CSharp.ORDER_ATOMIC);a=Blockly.CSharp.valueToCode(a,"VALUE",Blockly.CSharp.ORDER_ATOMIC);return b+".ObservedValue = "+a+";\n"};Blockly.CSharp.lists={};Blockly.CSharp.lists_create_empty=function(){return["new list<dynamic>()",Blockly.CSharp.ORDER_ATOMIC]};Blockly.CSharp.lists_create_with=function(){for(var a=Array(this.itemCount_),b=0;b<this.itemCount_;b++)a[b]=Blockly.CSharp.valueToCode(this,"ADD"+b,Blockly.CSharp.ORDER_COMMA)||"null";a="new List<dynamic> {"+a.join(", ")+"}";return[a,Blockly.CSharp.ORDER_ATOMIC]};
Blockly.CSharp.lists_repeat=function(){if(!Blockly.CSharp.definitions_.lists_repeat){var a=Blockly.CSharp.variableDB_.getDistinctName("lists_repeat",Blockly.Generator.NAME_TYPE);Blockly.CSharp.lists_repeat.repeat=a;var b=[];b.push("var "+a+" = new Func<dynamic, dynamic, List<dynamic>>((value, n) => {");b.push("  var array = new List<dynamic>(n);");b.push("  for (var i = 0; i < n; i++) {");b.push("    array.Add(value);");b.push("  }");b.push("  return array;");b.push("});");Blockly.CSharp.definitions_.lists_repeat=
b.join("\n")}console.log(Blockly.CSharp.definitions_.lists_repeat);a=Blockly.CSharp.valueToCode(this,"ITEM",Blockly.CSharp.ORDER_COMMA)||"null";b=Blockly.CSharp.valueToCode(this,"NUM",Blockly.CSharp.ORDER_COMMA)||"0";return[Blockly.CSharp.lists_repeat.repeat+"("+a+", "+b+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.lists_length=function(){return[(Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_FUNCTION_CALL)||"null")+".Count",Blockly.CSharp.ORDER_MEMBER]};
Blockly.CSharp.lists_isEmpty=function(){return[(Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_MEMBER)||"new list<dynamic>()")+".Count == 0",Blockly.CSharp.ORDER_LOGICAL_NOT]};Blockly.CSharp.lists_indexOf=function(){var a="FIRST"==this.getFieldValue("END")?"IndexOf":"LastIndexOf",b=Blockly.CSharp.valueToCode(this,"FIND",Blockly.CSharp.ORDER_NONE)||"null";return[(Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_MEMBER)||"null")+"."+a+"("+b+") + 1",Blockly.CSharp.ORDER_MEMBER]};
Blockly.CSharp.lists_getIndex=function(){var a=this.getFieldValue("MODE")||"GET",b=this.getFieldValue("WHERE")||"FROM_START",c=Blockly.CSharp.valueToCode(this,"AT",Blockly.CSharp.ORDER_UNARY_NEGATION)||"1",d=Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_MEMBER)||"new list<dynamic>()";if("GET_REMOVE"==a){c="FIRST"==b?1:"LAST"==b?d+".Count - 1":Blockly.isNumber(c)?parseFloat(c)-1:"("+c+" - 1)";"FROM_END"==b&&(c="("+d+".Count) - "+(c+1));if(!Blockly.CSharp.definitions_.lists_get_remove_at){b=
Blockly.CSharp.variableDB_.getDistinctName("lists_get_remove_at",Blockly.Generator.NAME_TYPE);Blockly.CSharp.lists_getIndex.lists_get_remove_at=b;var e=[];e.push("var "+b+" = new Func<List<dynamic>, int, dynamic>((list, index) => {");e.push("  var res = list[index];");e.push("  list.RemoveAt(index);");e.push("  return res;");e.push("});");Blockly.CSharp.definitions_.lists_get_remove_at=e.join("\n")}c=Blockly.CSharp.lists_getIndex.lists_get_remove_at+"("+d+", "+c+")";return[c,Blockly.CSharp.ORDER_FUNCTION_CALL]}if("FIRST"==
b){if("GET"==a)return[d+".First()",Blockly.CSharp.ORDER_MEMBER];if("REMOVE"==a)return d+".RemoveAt(0);\n"}else if("LAST"==b){if("GET"==a)return[d+".Last()",Blockly.CSharp.ORDER_MEMBER];if("REMOVE"==a)return d+".RemoveAt("+d+".Count - 1);\n"}else if("FROM_START"==b){if("GET"==a)return[d+"["+c+"]",Blockly.CSharp.ORDER_MEMBER];if("REMOVE"==a)return d+".RemoveAt("+c+");\n"}else if("FROM_END"==b){if("GET"==a)return[d+"[list.Count - "+c+"]",Blockly.CSharp.ORDER_MEMBER];if("REMOVE"==a)return d+".RemoveAt(list.Count - "+
c+");\n"}else if("RANDOM"==b){Blockly.CSharp.definitions_.lists_get_random_item||(b=Blockly.CSharp.variableDB_.getDistinctName("lists_get_random_item",Blockly.Generator.NAME_TYPE),Blockly.CSharp.lists_getIndex.random=b,e=[],e.push("var "+b+" = new Func<List<dynamic>, bool, dynamic>((list, remove) => {"),e.push("  var x = (new Random()).Next(list.Count);"),e.push("  if (remove) {"),e.push("    var res = list[x];"),e.push("    list.RemoveAt(x);"),e.push("    return res;"),e.push("  } else {"),e.push("    return list[x];"),
e.push("  }"),e.push("});"),Blockly.CSharp.definitions_.lists_get_random_item=e.join("\n"));c=Blockly.CSharp.lists_getIndex.random+"("+d+", "+("GET"!=a)+")";if("GET"==a)return[c,Blockly.CSharp.ORDER_FUNCTION_CALL];if("REMOVE"==a)return c+";\n"}throw"Unhandled combination (lists_getIndex).";};
Blockly.CSharp.lists_setIndex=function(){var a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_MEMBER)||"new list<dynamic>()",b=this.getFieldValue("MODE")||"GET",c=this.getFieldValue("WHERE")||"FROM_START",d=Blockly.CSharp.valueToCode(this,"AT",Blockly.CSharp.ORDER_NONE)||"1",e=Blockly.CSharp.valueToCode(this,"TO",Blockly.CSharp.ORDER_ASSIGNMENT)||"null";if("FIRST"==c){if("SET"==b)return a+"[0] = "+e+";\n";if("INSERT"==b)return a+".Insert(0, "+e+");\n"}else if("LAST"==c){if("SET"==b)return a+
"["+a+".Count - 1] = "+e+";\n";if("INSERT"==b)return a+".Add("+e+");\n"}else if("FROM_START"==c){d=Blockly.isNumber(d)?parseFloat(d)-1:"("+a+".Count) - "+d;if("SET"==b)return a+"["+d+"] = "+e+";\n";if("INSERT"==b)return a+".Insert("+d+", "+e+");\n"}else if("FROM_END"==c){if("SET"==b)return a+"["+a+".Count - "+d+"] = "+e+";\n";if("INSERT"==b)return a+".Insert("+a+".Count - "+d+", "+e+");\n"}else if("RANDOM"==c){c=Blockly.CSharp.variableDB_.getDistinctName("tmp_x",Blockly.Variables.NAME_TYPE);if("SET"==
b)return a+"["+c+"] = "+e+";\n";if("INSERT"==b)return a+".Insert("+c+", "+e+");\n"}throw"Unhandled combination (lists_setIndex).";};
Blockly.CSharp.lists_getSublist=function(){var a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_MEMBER)||"new list<dynamic>()",b=this.getFieldValue("WHERE1"),c=this.getFieldValue("WHERE2"),d=Blockly.CSharp.valueToCode(this,"AT1",Blockly.CSharp.ORDER_NONE)||"1",e=Blockly.CSharp.valueToCode(this,"AT2",Blockly.CSharp.ORDER_NONE)||"1";if("FIRST"==b&&"LAST"==c)a="new List<dynamic>("+a+")";else{if(!Blockly.CSharp.definitions_.lists_get_sublist){var g=Blockly.CSharp.variableDB_.getDistinctName("lists_get_sublist",
Blockly.Generator.NAME_TYPE);Blockly.CSharp.lists_getSublist.func=g;var f=[];f.push("var "+g+" = new Func<List<dynamic>, dynamic, int, dynamic, int, List<dynamic>>((list, where1, at1, where2, at2) => {");f.push("  var getIndex = new Func<dynamic, int, int>((where, at) => {");f.push('    if (where == "FROM_START") {');f.push("      at--;");f.push('    } else if (where == "FROM_END") {');f.push("      at = list.Count - at;");f.push('    } else if (where == "FIRST") {');f.push("      at = 0;");f.push('    } else if (where == "LAST") {');
f.push("      at = list.Count - 1;");f.push("    } else {");f.push('      throw new ApplicationException("Unhandled option (lists_getSublist).");');f.push("    }");f.push("    return at;");f.push("  });");f.push("  at1 = getIndex(where1, at1);");f.push("  at2 = getIndex(where2, at2);");f.push("  return list.GetRange(at1, at2 - at1 + 1);");f.push("});");Blockly.CSharp.definitions_.lists_get_sublist=f.join("\n")}a=Blockly.CSharp.lists_getSublist.func+"("+a+', "'+b+'", '+d+', "'+c+'", '+e+")"}return[a,
Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.lists_sort=function(){var a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_FUNCTION_CALL)||"new list<dynamic>()",b="1"===this.getFieldValue("DIRECTION")?1:-1,c=this.getFieldValue("TYPE"),d="";"NUMERIC"==c?d=1==b?d+(a+".Sort()"):d+(a+".Sort();\n")+(a+".Reserve()"):"TEXT"==c?d=1==b?d+(a+".Sort()"):d+(a+".Sort();\n")+(a+".Reserve()"):"IGNORE_CASE"==c&&(d=1==b?d+(a+".Sort(StringComparer.OrdinalIgnoreCase)"):d+(a+".Sort().Sort(StringComparer.OrdinalIgnoreCase);\n")+(a+".Reserve()"));
return d};Blockly.CSharp.lists_split=function(){var a=Blockly.CSharp.valueToCode(this,"INPUT",Blockly.CSharp.ORDER_MEMBER),b=Blockly.CSharp.valueToCode(this,"DELIM",Blockly.CSharp.ORDER_NONE)||'""',c=this.getFieldValue("MODE");if("SPLIT"==c)a||(a='""'),c="split";else if("JOIN"==c)a||(a="new list<dynamic>()"),c="join";else throw Error("Unknown mode: "+c);return[a+"."+c+"("+b+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.lists_reverse=function(){return[(Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_FUNCTION_CALL)||"new list<dynamic>()")+".Reverse()",Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.logic={};
Blockly.CSharp.controls_if=function(){var a=0,b=Blockly.CSharp.valueToCode(this,"IF"+a,Blockly.CSharp.ORDER_NONE)||"false",c=Blockly.CSharp.statementToCode(this,"DO"+a),d="if ("+b+") {\n"+c+"}";for(a=1;a<=this.elseifCount_;a++)b=Blockly.CSharp.valueToCode(this,"IF"+a,Blockly.CSharp.ORDER_NONE)||"false",c=Blockly.CSharp.statementToCode(this,"DO"+a),d+=" else if ("+b+") {\n"+c+"}\n";this.elseCount_&&(c=Blockly.CSharp.statementToCode(this,"ELSE"),d+=" else {\n"+c+"}\n");return d+"\n"};
Blockly.CSharp.controls_ifelse=function(){var a=Blockly.CSharp.valueToCode(this,"IF0",Blockly.CSharp.ORDER_NONE)||"false",b=Blockly.CSharp.statementToCode(this,"DO0");a="if ("+a+") {\n"+b+"}";b=Blockly.CSharp.statementToCode(this,"ELSE");return a+(" else {\n"+b+"}\n\n")};
Blockly.CSharp.logic_compare=function(){var a=this.getFieldValue("OP");a=Blockly.CSharp.logic_compare.OPERATORS[a];var b="=="==a||"!="==a?Blockly.CSharp.ORDER_EQUALITY:Blockly.CSharp.ORDER_RELATIONAL,c=Blockly.CSharp.valueToCode(this,"A",b)||"null",d=Blockly.CSharp.valueToCode(this,"B",b)||"null";return[c+" "+a+" "+d,b]};Blockly.CSharp.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="};
Blockly.CSharp.logic_operation=function(){var a="AND"==this.getFieldValue("OP")?"&&":"||",b="&&"==a?Blockly.CSharp.ORDER_LOGICAL_AND:Blockly.CSharp.ORDER_LOGICAL_OR,c=Blockly.CSharp.valueToCode(this,"A",b)||"false",d=Blockly.CSharp.valueToCode(this,"B",b)||"false";return[c+" "+a+" "+d,b]};Blockly.CSharp.logic_negate=function(){var a=Blockly.CSharp.ORDER_LOGICAL_NOT;return["!"+(Blockly.CSharp.valueToCode(this,"BOOL",a)||"false"),a]};
Blockly.CSharp.logic_boolean=function(){return["TRUE"==this.getFieldValue("BOOL")?"true":"false",Blockly.CSharp.ORDER_ATOMIC]};Blockly.CSharp.logic_null=function(){return["null",Blockly.CSharp.ORDER_ATOMIC]};
Blockly.CSharp.logic_ternary=function(){var a=Blockly.CSharp.valueToCode(this,"IF",Blockly.CSharp.ORDER_CONDITIONAL)||"false",b=Blockly.CSharp.valueToCode(this,"THEN",Blockly.CSharp.ORDER_CONDITIONAL)||"null",c=Blockly.CSharp.valueToCode(this,"ELSE",Blockly.CSharp.ORDER_CONDITIONAL)||"null";return[a+" ? "+b+" : "+c,Blockly.CSharp.ORDER_CONDITIONAL]};Blockly.CSharp.loops={};Blockly.CSharp.control={};Blockly.CSharp.controls_repeat=function(){var a=Number(this.getFieldValue("TIMES")),b=Blockly.CSharp.statementToCode(this,"DO");Blockly.CSharp.INFINITE_LOOP_TRAP&&(b=Blockly.CSharp.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c=Blockly.CSharp.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE);return"for (var "+c+" = 0; "+c+" < "+a+"; "+c+"++) {\n"+b+"}\n"};
Blockly.CSharp.controls_repeat_ext=function(){var a=Blockly.CSharp.valueToCode(this,"TIMES",Blockly.CSharp.ORDER_ASSIGNMENT)||"0",b=Blockly.CSharp.statementToCode(this,"DO");Blockly.CSharp.INFINITE_LOOP_TRAP&&(b=Blockly.CSharp.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c="",d=Blockly.CSharp.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE),e=a;a.match(/^\w+$/)||Blockly.isNumber(a)||(e=Blockly.CSharp.variableDB_.getDistinctName("repeat_end",Blockly.Variables.NAME_TYPE),
c+="var "+e+" = "+a+";\n");return c+("for (var "+d+" = 0; "+d+" < "+e+"; "+d+"++) {\n"+b+"}\n")};Blockly.CSharp.controls_whileUntil=function(){var a="UNTIL"==this.getFieldValue("MODE"),b=Blockly.CSharp.valueToCode(this,"BOOL",a?Blockly.CSharp.ORDER_LOGICAL_NOT:Blockly.CSharp.ORDER_NONE)||"false",c=Blockly.CSharp.statementToCode(this,"DO");Blockly.CSharp.INFINITE_LOOP_TRAP&&(c=Blockly.CSharp.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+c);a&&(b="!"+b);return"while ("+b+") {\n"+c+"}\n"};
Blockly.CSharp.controls_for=function(){var a=Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),b=Blockly.CSharp.valueToCode(this,"FROM",Blockly.CSharp.ORDER_ASSIGNMENT)||"0",c=Blockly.CSharp.valueToCode(this,"TO",Blockly.CSharp.ORDER_ASSIGNMENT)||"0",d=Blockly.CSharp.valueToCode(this,"BY",Blockly.CSharp.ORDER_ASSIGNMENT)||"1",e=Blockly.CSharp.statementToCode(this,"DO");Blockly.CSharp.INFINITE_LOOP_TRAP&&(e=Blockly.CSharp.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+
this.id+"'")+e);if(Blockly.isNumber(b)&&Blockly.isNumber(c)&&Blockly.isNumber(d)){var g=parseFloat(b)<=parseFloat(c);var f="for ("+a+" = "+b+"; "+a+(g?" <= ":" >= ")+c+"; "+a;a=Math.abs(parseFloat(d));f=(1==a?f+(g?"++":"--"):f+((g?" += ":" -= ")+a))+(") {\n"+e+"}\n")}else f="",g=b,b.match(/^\w+$/)||Blockly.isNumber(b)||(g=Blockly.CSharp.variableDB_.getDistinctName(a+"_start",Blockly.Variables.NAME_TYPE),f+="var "+g+" = "+b+";\n"),b=c,c.match(/^\w+$/)||Blockly.isNumber(c)||(b=Blockly.CSharp.variableDB_.getDistinctName(a+
"_end",Blockly.Variables.NAME_TYPE),f+="var "+b+" = "+c+";\n"),c=Blockly.CSharp.variableDB_.getDistinctName(a+"_inc",Blockly.Variables.NAME_TYPE),f+="var "+c+" = ",f=Blockly.isNumber(d)?f+(Math.abs(d)+";\n"):f+("Math.Abs("+d+");\n"),f=f+("if ("+g+" > "+b+") {\n  ")+(c+" = -"+c+";\n"),f+="}\n",f+="for ("+a+" = "+g+";\n     "+c+" >= 0 ? "+a+" <= "+b+" : "+a+" >= "+b+";\n     "+a+" += "+c+") {\n"+e+"}\n";return f};
Blockly.CSharp.controls_forEach=function(){var a=Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),b=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_ASSIGNMENT)||"[]",c=Blockly.CSharp.statementToCode(this,"DO");Blockly.CSharp.INFINITE_LOOP_TRAP&&(c=Blockly.CSharp.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+c);var d=Blockly.CSharp.variableDB_.getDistinctName(a+"_index",Blockly.Variables.NAME_TYPE);if(b.match(/^\w+$/))a="foreach (var "+a+" in  "+
b+") {\n"+c+"}\n";else{var e=Blockly.CSharp.variableDB_.getDistinctName(a+"_list",Blockly.Variables.NAME_TYPE);a="var "+e+" = "+b+";\nforeach (var "+d+" in "+e+") {\n  "+(a+" = "+e+"["+d+"];\n"+c)+"}\n"}return a};Blockly.CSharp.controls_flow_statements=function(){switch(this.getFieldValue("FLOW")){case "BREAK":return"break;\n";case "CONTINUE":return"continue;\n"}throw"Unknown flow statement.";};Blockly.CSharp.math={};Blockly.CSharp.math_number=function(){return[window.parseFloat(this.getFieldValue("NUM")),Blockly.CSharp.ORDER_ATOMIC]};Blockly.CSharp.math_arithmetic=function(){var a=this.getFieldValue("OP"),b=Blockly.CSharp.math_arithmetic.OPERATORS[a];a=b[0];b=b[1];var c=Blockly.CSharp.valueToCode(this,"A",b)||"0.0",d=Blockly.CSharp.valueToCode(this,"B",b)||"0.0";return a?[c+a+d,b]:["Math.Pow("+c+", "+d+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.CSharp.ORDER_ADDITION],MINUS:[" - ",Blockly.CSharp.ORDER_SUBTRACTION],MULTIPLY:[" * ",Blockly.CSharp.ORDER_MULTIPLICATION],DIVIDE:[" / ",Blockly.CSharp.ORDER_DIVISION],POWER:[null,Blockly.CSharp.ORDER_COMMA]};
Blockly.CSharp.math_single=function(){var a=this.getFieldValue("OP");if("NEG"==a){var b=Blockly.CSharp.valueToCode(this,"NUM",Blockly.CSharp.ORDER_UNARY_NEGATION)||"0.0";"-"==b[0]&&(b=" "+b);return["-"+b,Blockly.CSharp.ORDER_UNARY_NEGATION]}b="SIN"==a||"COS"==a||"TAN"==a?Blockly.CSharp.valueToCode(this,"NUM",Blockly.CSharp.ORDER_DIVISION)||"0":Blockly.CSharp.valueToCode(this,"NUM",Blockly.CSharp.ORDER_NONE)||"0.0";switch(a){case "ABS":var c="Math.Abs("+b+")";break;case "ROOT":c="Math.Sqrt("+b+")";
break;case "LN":c="Math.Log("+b+")";break;case "LOG10":c="Math.Log10("+b+")";break;case "EXP":c="Math.Exp("+b+")";break;case "POW10":c="Math.Pow("+b+", 10)";break;case "ROUND":c="Math.Round("+b+")";break;case "ROUNDUP":c="Math.Ceil("+b+")";break;case "ROUNDDOWN":c="Math.Floor("+b+")";break;case "SIN":c="Math.Sin("+b+" / 180 * Math.PI)";break;case "COS":c="Math.Cos("+b+" / 180 * Math.PI)";break;case "TAN":c="Math.Tan("+b+" / 180 * Math.PI)"}if(c)return[c,Blockly.CSharp.ORDER_FUNCTION_CALL];switch(a){case "ASIN":c=
"Math.Asin("+b+") / Math.PI * 180";break;case "ACOS":c="Math.Acos("+b+") / Math.PI * 180";break;case "ATAN":c="Math.Atan("+b+") / Math.PI * 180";break;default:throw"Unknown math operator: "+a;}return[c,Blockly.CSharp.ORDER_DIVISION]};Blockly.CSharp.math_constant=function(){var a=this.getFieldValue("CONSTANT");return Blockly.CSharp.math_constant.CONSTANTS[a]};
Blockly.CSharp.math_constant.CONSTANTS={PI:["Math.PI",Blockly.CSharp.ORDER_MEMBER],E:["Math.E",Blockly.CSharp.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.Sqrt(5)) / 2",Blockly.CSharp.ORDER_DIVISION],SQRT2:["Math.Sqrt(2)",Blockly.CSharp.ORDER_MEMBER],SQRT1_2:["Math.Sqrt(1.0 / 2)",Blockly.CSharp.ORDER_MEMBER],INFINITY:["double.PositiveInfinity",Blockly.CSharp.ORDER_ATOMIC]};
Blockly.CSharp.math_number_property=function(){var a=Blockly.CSharp.valueToCode(this,"NUMBER_TO_CHECK",Blockly.CSharp.ORDER_MODULUS)||"double.NaN",b=this.getFieldValue("PROPERTY");if("PRIME"==b){if(!Blockly.CSharp.definitions_.isPrime){b=Blockly.CSharp.variableDB_.getDistinctName("isPrime",Blockly.Generator.NAME_TYPE);Blockly.CSharp.logic_prime=b;var c=[];c.push("var "+b+" = new Func<double, bool>((n) => {");c.push("  // http://en.wikipedia.org/wiki/Primality_test#Naive_methods");c.push("  if (n == 2.0 || n == 3.0)");
c.push("    return true;");c.push("  // False if n is NaN, negative, is 1, or not whole. And false if n is divisible by 2 or 3.");c.push("  if (double.IsNaN(n) || n <= 1 || n % 1 != 0.0 || n % 2 == 0.0 || n % 3 == 0.0)");c.push("    return false;");c.push("  // Check all the numbers of form 6k +/- 1, up to sqrt(n).");c.push("  for (var x = 6; x <= Math.Sqrt(n) + 1; x += 6) {");c.push("    if (n % (x - 1) == 0.0 || n % (x + 1) == 0.0)");c.push("      return false;");c.push("  }");c.push("  return true;");
c.push("});");Blockly.CSharp.definitions_.isPrime=c.join("\n")}c=Blockly.CSharp.logic_prime+"("+a+")";return[c,Blockly.CSharp.ORDER_FUNCTION_CALL]}switch(b){case "EVEN":c=a+" % 2 == 0";break;case "ODD":c=a+" % 2 == 1";break;case "WHOLE":c=a+" % 1 == 0";break;case "POSITIVE":c=a+" > 0";break;case "NEGATIVE":c=a+" < 0";break;case "DIVISIBLE_BY":b=Blockly.CSharp.valueToCode(this,"DIVISOR",Blockly.CSharp.ORDER_MODULUS)||"double.NaN",c=a+" % "+b+" == 0"}return[c,Blockly.CSharp.ORDER_EQUALITY]};
Blockly.CSharp.math_change=function(){var a=Blockly.CSharp.valueToCode(this,"DELTA",Blockly.CSharp.ORDER_ADDITION)||"0.0",b=Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);return b+" = ("+b+'.GetType().Name == "Double" ? '+b+" : 0.0) + "+a+";\n"};Blockly.CSharp.math_round=Blockly.CSharp.math_single;Blockly.CSharp.math_trig=Blockly.CSharp.math_single;
Blockly.CSharp.math_on_list=function(){var a=this.getFieldValue("OP");switch(a){case "SUM":a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_MEMBER)||"new List<dynamic>()";a+=".Aggregate((x, y) => x + y)";break;case "MIN":a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_COMMA)||"new List<dynamic>()";a+=".Min()";break;case "MAX":a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_COMMA)||"new List<dynamic>()";a+=".Max()";break;case "AVERAGE":a=Blockly.CSharp.valueToCode(this,
"LIST",Blockly.CSharp.ORDER_COMMA)||"new List<dynamic>()";a+=".Average()";break;case "MEDIAN":if(!Blockly.CSharp.definitions_.math_median){var b=Blockly.CSharp.variableDB_.getDistinctName("math_median",Blockly.Generator.NAME_TYPE);Blockly.CSharp.math_on_list.math_median=b;a=[];a.push("var "+b+" = new Func<List<dynamic>,dynamic>((vals) => {");a.push("  vals.Sort();");a.push("  if (vals.Count % 2 == 0)");a.push("    return (vals[vals.Count / 2 - 1] + vals[vals.Count / 2]) / 2;");a.push("  else");a.push("    return vals[(vals.Count - 1) / 2];");
a.push("});");Blockly.CSharp.definitions_.math_median=a.join("\n")}a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_NONE)||"new List<dynamic>()";a=Blockly.CSharp.math_on_list.math_median+"("+a+")";break;case "MODE":Blockly.CSharp.definitions_.math_modes||(b=Blockly.CSharp.variableDB_.getDistinctName("math_modes",Blockly.Generator.NAME_TYPE),Blockly.CSharp.math_on_list.math_modes=b,a=[],a.push("var "+b+" = new Func<List<dynamic>,List<dynamic>>((values) => {"),a.push("  var modes = new List<dynamic>();"),
a.push("  var counts = new Dictionary<double, int>();"),a.push("  var maxCount = 0;"),a.push("  foreach (var value in values) {"),a.push("    int storedCount;"),a.push("    if (counts.TryGetValue(value, out storedCount)) {"),a.push("      maxCount = Math.Max(maxCount, ++counts[value]);"),a.push("    }"),a.push("    else {"),a.push("      counts.Add(value, 1);"),a.push("      maxCount = 1;"),a.push("    }"),a.push("  }"),a.push("  foreach (var pair in counts) {"),a.push("    if (pair.Value == maxCount)"),
a.push("      modes.Add(pair.Key);"),a.push("  }"),a.push("  return modes;"),a.push("});"),Blockly.CSharp.definitions_.math_modes=a.join("\n"));a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_NONE)||"new List<dynamic>()";a=Blockly.CSharp.math_on_list.math_modes+"("+a+")";break;case "STD_DEV":Blockly.CSharp.definitions_.math_standard_deviation||(b=Blockly.CSharp.variableDB_.getDistinctName("math_standard_deviation",Blockly.Generator.NAME_TYPE),Blockly.CSharp.math_on_list.math_standard_deviation=
b,a=[],a.push("var "+b+" = new Func<List<dynamic>,double>((numbers) => {"),a.push("  var n = numbers.Count;"),a.push("  var mean = numbers.Average(val => val);"),a.push("  var variance = 0.0;"),a.push("  for (var j = 0; j < n; j++) {"),a.push("    variance += Math.Pow(numbers[j] - mean, 2);"),a.push("  }"),a.push("  variance = variance / n;"),a.push("  return Math.Sqrt(variance);"),a.push("});"),Blockly.CSharp.definitions_.math_standard_deviation=a.join("\n"));a=Blockly.CSharp.valueToCode(this,"LIST",
Blockly.CSharp.ORDER_NONE)||"new List<dynamic>()";a=Blockly.CSharp.math_on_list.math_standard_deviation+"("+a+")";break;case "RANDOM":Blockly.CSharp.definitions_.math_random_item||(b=Blockly.CSharp.variableDB_.getDistinctName("math_random_item",Blockly.Generator.NAME_TYPE),Blockly.CSharp.math_on_list.math_random_item=b,a=[],a.push("var "+b+" = new Func<List<dynamic>,dynamic>((list) => {"),a.push("  var x = (new Random()).Next(list.Count);"),a.push("  return list[x];"),a.push("});"),Blockly.CSharp.definitions_.math_random_item=
a.join("\n"));a=Blockly.CSharp.valueToCode(this,"LIST",Blockly.CSharp.ORDER_NONE)||"new List<dynamic>()";a=Blockly.CSharp.math_on_list.math_random_item+"("+a+")";break;default:throw"Unknown operator: "+a;}return[a,Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.math_modulo=function(){var a=Blockly.CSharp.valueToCode(this,"DIVIDEND",Blockly.CSharp.ORDER_MODULUS)||"0.0",b=Blockly.CSharp.valueToCode(this,"DIVISOR",Blockly.CSharp.ORDER_MODULUS)||"0.0";return[a+" % "+b,Blockly.CSharp.ORDER_MODULUS]};
Blockly.CSharp.math_constrain=function(){var a=Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_COMMA)||"0.0",b=Blockly.CSharp.valueToCode(this,"LOW",Blockly.CSharp.ORDER_COMMA)||"0.0",c=Blockly.CSharp.valueToCode(this,"HIGH",Blockly.CSharp.ORDER_COMMA)||"double.PositiveInfinity";return["Math.Min(Math.Max("+a+", "+b+"), "+c+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.math_random_int=function(){var a=Blockly.CSharp.valueToCode(this,"FROM",Blockly.CSharp.ORDER_COMMA)||"0.0",b=Blockly.CSharp.valueToCode(this,"TO",Blockly.CSharp.ORDER_COMMA)||"0.0";if(!Blockly.CSharp.definitions_.math_random_int){var c=Blockly.CSharp.variableDB_.getDistinctName("math_random_int",Blockly.Generator.NAME_TYPE);Blockly.CSharp.math_random_int.random_function=c;var d=[];d.push("var "+c+" new Func<int,int,int>((a, b) => {");d.push("  if (a > b) {");d.push("    // Swap a and b to ensure a is smaller.");
d.push("    var c = a;");d.push("    a = b;");d.push("    b = c;");d.push("  }");d.push("  return (int)Math.Floor(a + (new Random()).Next(b - a));");d.push("});");Blockly.CSharp.definitions_.math_random_int=d.join("\n")}return[Blockly.CSharp.math_random_int.random_function+"("+a+", "+b+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.math_random_float=function(){return["(new Random()).NextDouble()",Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.math_normal=function(a){var b=Blockly.CSharp.valueToCode(a,"MEAN",Blockly.CSharp.ORDER_ATOMIC);a=Blockly.CSharp.valueToCode(a,"STD_DEV",Blockly.CSharp.ORDER_ATOMIC);return["Rand.Normal("+b+", "+a+")",Blockly.CSharp.ORDER_NONE]};Blockly.CSharp.procedures={};
Blockly.CSharp.procedures_defreturn=function(){var a=Blockly.CSharp.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),b=Blockly.CSharp.statementToCode(this,"STACK");Blockly.CSharp.INFINITE_LOOP_TRAP&&(b=Blockly.CSharp.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c=Blockly.CSharp.valueToCode(this,"RETURN",Blockly.CSharp.ORDER_NONE)||"";c&&(c="  return "+c+";\n");for(var d=[],e=0;e<this.arguments_.length;e++)d[e]=Blockly.CSharp.variableDB_.getName(this.arguments_[e],Blockly.Variables.NAME_TYPE);
var g="";for(e=0;e<d.length;e++)g=0==g.length?"dynamic":g+", dynamic";0!=c.length&&(g=0==g.length?"dynamic":g+", dynamic");b="var "+a+" = new "+(0==c.length?"Action":"Func<"+g+">")+"(("+d.join(", ")+") => {\n"+b+c+"});";b=Blockly.CSharp.scrub_(this,b);Blockly.CSharp.definitions_[a]=b;return null};Blockly.CSharp.procedures_defnoreturn=Blockly.CSharp.procedures_defreturn;
Blockly.CSharp.procedures_callreturn=function(){for(var a=Blockly.CSharp.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.CSharp.valueToCode(this,"ARG"+c,Blockly.CSharp.ORDER_COMMA)||"null";return[a+"("+b.join(", ")+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.procedures_callnoreturn=function(){for(var a=Blockly.CSharp.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.CSharp.valueToCode(this,"ARG"+c,Blockly.CSharp.ORDER_COMMA)||"null";return a+"("+b.join(", ")+");\n"};
Blockly.CSharp.procedures_ifreturn=function(){var a="if ("+(Blockly.CSharp.valueToCode(this,"CONDITION",Blockly.CSharp.ORDER_NONE)||"false")+") {\n";if(this.hasReturnValue_){var b=Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_NONE)||"null";a+="  return "+b+";\n"}else a+="  return;\n";return a+"}\n"};Blockly.CSharp.text={};Blockly.CSharp.text=function(){return[Blockly.CSharp.quote_(this.getFieldValue("TEXT")),Blockly.CSharp.ORDER_ATOMIC]};Blockly.CSharp.text_multiline=function(){var a=Blockly.CSharp.multiline_quote_(this.getFieldValue("TEXT")),b=-1!=a.indexOf("+")?Blockly.CSharp.ORDER_ADDITION:Blockly.CSharp.ORDER_ATOMIC;return[a,b]};
Blockly.CSharp.text_join=function(){if(0==this.itemCount_)return['""',Blockly.CSharp.ORDER_ATOMIC];if(1==this.itemCount_){var a=Blockly.CSharp.valueToCode(this,"ADD0",Blockly.CSharp.ORDER_NONE)||'""';return[a+".ToString()",Blockly.CSharp.ORDER_FUNCTION_CALL]}if(2==this.itemCount_){a=Blockly.CSharp.valueToCode(this,"ADD0",Blockly.CSharp.ORDER_NONE)||'""';var b=Blockly.CSharp.valueToCode(this,"ADD1",Blockly.CSharp.ORDER_NONE)||'""';return["String.Concat("+a+", "+b+")",Blockly.CSharp.ORDER_ADDITION]}a=
Array(this.itemCount_);for(b=0;b<this.itemCount_;b++)a[b]=Blockly.CSharp.valueToCode(this,"ADD"+b,Blockly.CSharp.ORDER_COMMA)||'""';a="String.Concat("+a.join(", ")+")";return[a,Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.text_append=function(){var a=Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),b=Blockly.CSharp.valueToCode(this,"TEXT",Blockly.CSharp.ORDER_NONE)||'""';return a+" = String.Concat("+a+", "+b+");\n"};
Blockly.CSharp.text_length=function(){return[(Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_FUNCTION_CALL)||'""')+".Length",Blockly.CSharp.ORDER_MEMBER]};Blockly.CSharp.text_isEmpty=function(){return[(Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_MEMBER)||'""')+".Length == 0",Blockly.CSharp.ORDER_EQUALITY]};
Blockly.CSharp.text_indexOf=function(){var a="FIRST"==this.getFieldValue("END")?"IndexOf":"LastIndexOf",b=Blockly.CSharp.valueToCode(this,"FIND",Blockly.CSharp.ORDER_NONE)||'""';return[(Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_MEMBER)||'""')+"."+a+"("+b+") + 1",Blockly.CSharp.ORDER_MEMBER]};
Blockly.CSharp.text_charAt=function(){var a=this.getFieldValue("WHERE")||"FROM_START",b=Blockly.CSharp.valueToCode(this,"AT",Blockly.CSharp.ORDER_UNARY_NEGATION)||"1",c=Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_MEMBER)||'""';switch(a){case "FIRST":return[c+".First()",Blockly.CSharp.ORDER_FUNCTION_CALL];case "LAST":return[c+".Last()",Blockly.CSharp.ORDER_FUNCTION_CALL];case "FROM_START":return[c+"["+b+" - 1]",Blockly.CSharp.ORDER_FUNCTION_CALL];case "FROM_END":return[c+"[text.Length - "+
b+"]",Blockly.CSharp.ORDER_FUNCTION_CALL];case "RANDOM":return Blockly.CSharp.definitions_.text_random_letter||(a=Blockly.CSharp.variableDB_.getDistinctName("text_random_letter",Blockly.Generator.NAME_TYPE),Blockly.CSharp.text_charAt.text_random_letter=a,b=[],b.push("var "+a+" = new Func<string, char>((text) => {"),b.push("  var x = (new Random()).Next(text.length);"),b.push("  return text[x];"),b.push("});"),Blockly.CSharp.definitions_.text_random_letter=b.join("\n")),c=Blockly.CSharp.text_charAt.text_random_letter+
"("+c+")",[c,Blockly.CSharp.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt).";};
Blockly.CSharp.text_getSubstring=function(){var a=Blockly.CSharp.valueToCode(this,"STRING",Blockly.CSharp.ORDER_MEMBER)||"null",b=this.getFieldValue("WHERE1"),c=this.getFieldValue("WHERE2"),d=Blockly.CSharp.valueToCode(this,"AT1",Blockly.CSharp.ORDER_NONE)||"1",e=Blockly.CSharp.valueToCode(this,"AT2",Blockly.CSharp.ORDER_NONE)||"1";if("FIRST"!=b||"LAST"!=c){if(!Blockly.CSharp.definitions_.text_get_substring){var g=Blockly.CSharp.variableDB_.getDistinctName("text_get_substring",Blockly.Generator.NAME_TYPE);
Blockly.CSharp.text_getSubstring.func=g;var f=[];f.push("var "+g+" = new Func<string, dynamic, int, dynamic, int, string>((text, where1, at1, where2, at2) => {");f.push("  var getAt =new Func<dynamic, int, int>((where, at) => {");f.push('    if (where == "FROM_START") {');f.push("      at--;");f.push('    } else if (where == "FROM_END") {');f.push("      at = text.Length - at;");f.push('    } else if (where == "FIRST") {');f.push("      at = 0;");f.push('    } else if (where == "LAST") {');f.push("      at = text.Length - 1;");
f.push("    } else {");f.push('      throw new ApplicationException("Unhandled option (text_getSubstring).");');f.push("    }");f.push("    return at;");f.push("  });");f.push("  at1 = getAt(where1, at1);");f.push("  at2 = getAt(where2, at2) + 1;");f.push("  return text.Substring(at1, at2 - at1);");f.push("});");Blockly.CSharp.definitions_.text_get_substring=f.join("\n")}a=Blockly.CSharp.text_getSubstring.func+"("+a+', "'+b+'", '+d+', "'+c+'", '+e+")"}return[a,Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.text_changeCase=function(){var a=this.getFieldValue("CASE");if(a=Blockly.CSharp.text_changeCase.OPERATORS[a]){var b=Blockly.CSharp.valueToCode(this,"TEXT",Blockly.CSharp.ORDER_MEMBER)||'""';a=b+a}else Blockly.CSharp.definitions_.text_toTitleCase||(a=Blockly.CSharp.variableDB_.getDistinctName("text_toTitleCase",Blockly.Generator.NAME_TYPE),Blockly.CSharp.text_changeCase.toTitleCase=a,b=[],b.push("var "+a+" = new Func<string, string>((str) => {"),b.push("  var buf = new StringBuilder(str.Length);"),
b.push("  var toUpper = true;"),b.push("  foreach (var ch in str) {"),b.push("    buf.Append(toUpper ? Char.ToUpper(ch) : ch);"),b.push("    toUpper = Char.IsWhiteSpace(ch);"),b.push("  }"),b.push("  return buf.ToString();"),b.push("});"),Blockly.CSharp.definitions_.text_toTitleCase=b.join("\n")),b=Blockly.CSharp.valueToCode(this,"TEXT",Blockly.CSharp.ORDER_NONE)||'""',a=Blockly.CSharp.text_changeCase.toTitleCase+"("+b+")";return[a,Blockly.CSharp.ORDER_FUNCTION_CALL]};
Blockly.CSharp.text_changeCase.OPERATORS={UPPERCASE:".ToUpper()",LOWERCASE:".ToLower()",TITLECASE:null};Blockly.CSharp.text_trim=function(){var a=this.getFieldValue("MODE");a=Blockly.CSharp.text_trim.OPERATORS[a];return[(Blockly.CSharp.valueToCode(this,"TEXT",Blockly.CSharp.ORDER_MEMBER)||'""')+a,Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.text_trim.OPERATORS={LEFT:".TrimStart()",RIGHT:".TrimEnd()",BOTH:".Trim()"};
Blockly.CSharp.text_print=function(){return"Console.WriteLine("+(Blockly.CSharp.valueToCode(this,"TEXT",Blockly.CSharp.ORDER_NONE)||'""')+");\n"};
Blockly.CSharp.text_prompt=function(){var a=Blockly.CSharp.quote_(this.getFieldValue("TEXT")),b="NUMBER"==this.getFieldValue("TYPE"),c=Blockly.CSharp.variableDB_.getDistinctName("text_promptInput",Blockly.Generator.NAME_TYPE);Blockly.CSharp.text_prompt.promptInput=c;var d=[];d.push("var "+c+" = new Func<string, bool, dynamic>((msg, toNumber) => {");d.push("  Console.WriteLine(msg);");d.push("  var res = Console.ReadLine();");d.push("  if (toNumber)");d.push("    return Double.Parse(res);");d.push("  return res;");
d.push("});");Blockly.CSharp.definitions_.text_promptInput=d.join("\n");return[Blockly.CSharp.text_prompt.promptInput+"("+a+", "+b+")",Blockly.CSharp.ORDER_FUNCTION_CALL]};Blockly.CSharp.variables={};Blockly.CSharp.variables_get=function(){return[Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.CSharp.ORDER_ATOMIC]};Blockly.CSharp.variables_set=function(){var a=Blockly.CSharp.valueToCode(this,"VALUE",Blockly.CSharp.ORDER_ASSIGNMENT)||"null";return Blockly.CSharp.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+a+";\n"};
return Blockly.CSharp;
}));


//# sourceMappingURL=csharp_compressed.js.map
